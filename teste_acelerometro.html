<!DOCTYPE html>
<html>
<body>

<h2>Teste do Acelerômetro</h2>

<p><b>Status:</b> <span id="status">Aguardando...</span></p>
<p><b>Último evento:</b></p>
<pre id="out">Nenhum</pre>

<button id="btn">Ativar sensores</button>

<script>
const out = document.getElementById("out");
const statusEl = document.getElementById("status");

document.getElementById("btn").onclick = async function() {

  // Solicita permissão (iOS + Samsung OneUI)
  if (typeof DeviceMotionEvent.requestPermission === "function") {
    try {
      let p = await DeviceMotionEvent.requestPermission();
      statusEl.textContent = "Permissão: " + p;
    } catch(e) {
      statusEl.textContent = "Erro ao pedir permissão";
      return;
    }
  } else {
    statusEl.textContent = "Sem necessidade de permissão";
  }

  window.addEventListener("devicemotion", (e) => {
    if (!e.accelerationIncludingGravity) {
      out.textContent = "Sem dados...";
      return;
    }
    out.textContent =
      "X: " + e.accelerationIncludingGravity.x + "\n" +
      "Y: " + e.accelerationIncludingGravity.y + "\n" +
      "Z: " + e.accelerationIncludingGravity.z + "\n";
  });
};
</script>

</body>
</html>
